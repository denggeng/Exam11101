package resources

import (
	"math"
)

/*

在量子纠缠态的古森林里，存在着n个会随观测者意识改变状态的"薛定谔乐器"。每个乐器具有双重属性：

当被观测时，有 p 概率坍缩为"consonance音"(增益能量)，有 1-p 概率坍缩为"dissonance音"(消耗能量)。乐器间通过量子隧穿效应形成非定域关联。

每次进行观测时：
1. 需要选定一个乐器作为观测基点，并且需要观测完全部乐器
2. 观测会使乐器引发冯·诺依曼熵增过程，使得左右两侧乐器群产生量子退相干（观测基点归为左侧，且两侧均至少1个乐器）
3. 系统会根据香农信息熵比较两侧的量子态混合度 H = -Σp*log(p)
4. 更低量子态混合度的一侧会触发坍缩效应产生能量，更高量子态混合度的一侧会触发量子芝诺效应，需继续观测（熵相等时，记右侧为低熵侧）
5. 本次观测获得能量为：低熵侧期望能量（E = Σx*p） + 继续观测高熵侧获得的最大能量
6. 本次观测消耗能量为： ħ/20 的能量单位（ħ=4为普朗克常数）
7. 当观测到只有 1 个乐器时，获得能量和消耗能量均为 0

最终剩余乐器会引发波函数坍缩，根据最终能量E：
1. 若 E < 0：触发量子擦除效应，E → 0
2. 若 E > 0：受海森堡测不准原理限制，E → ⌈E/2⌉

求在最优观测序列下，获得能量的最大值。
注：上面的 log 均指自然对数，即以e为底。

## 示例
instruments = [
    (0.2, 3, 1),  # 乐器1: 20%概率+3能量，80%概率-1能量
    (0.8, 2, 2),  # 乐器2: 80%概率+2能量，20%概率-2能量
    (0.6, 4, 1),  # 乐器3: 60%概率+4能量，40%概率-1能量
    (0.4, 5, 10), # 乐器4: 40%概率+5能量，60%概率-10能量
]


输出：1
解释：
最优观测序列如下：
1. 第一次观测，两侧乐器分为：
instruments1 = [
    (0.2, 3, 1),
    (0.8, 2, 2),
]
instruments2 = [
    (0.6, 4, 1),
    (0.4, 5, 10),
]
左侧 H = (-0.2*log0.2-0.8log0.8) + (-0.8*log0.8-0.2log0.2) = 1.0; E = (0.2*3-0.8*1) + (0.8*2-0.2*2) = 1.0
右侧 H = (-0.6*log0.6-0.4log0.4) + (-0.4*log0.4-0.6log0.6) = 1.35; E = (0.6*4-0.4*1) + (0.4*5-0.6*10) = -2.0
所以 Energy(instruments) = 1.0 + Energy(instruments2) - 0.2 = 0.8 -> Energy(instruments) = ceiling(0.8/2) = 1，这里的 Energy(instruments2) 需要继续观测

2. 第二次观测（继续观测 instruments2），两侧乐器分为：
instruments21 = [
    (0.6, 4, 1),
]
instruments22 = [
    (0.4, 5, 10),
]
左侧 H = (-0.6*log0.6-0.4log0.4)=0.67; E = (0.6*4-0.4*1) = 2.0
右侧 H = (-0.4*log0.4-0.6log0.6)=0.67; E = (0.4*5-0.6*10) = -4.0
所以 Energy(instruments2) = - 4.0 + Energy(instruments21) - 0.2 = -4.2 -> Energy(instruments2) = 0，这里的 Energy(instruments21) 只有 1 个乐器，能量为 0

可以尝试多种观测顺序，发现这种顺序下能量最大。
*/

func (context ExamContext) doAnswer(param Param) Answer {
	
	return Answer{result: 0}
}